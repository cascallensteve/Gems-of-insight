<!DOCTYPE html>
<html>
<head>
    <title>Video Test</title>
    <style>
        body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
        .video-container { 
            width: 100%; 
            max-width: 800px; 
            margin: 0 auto;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
        }
        video { 
            width: 100%; 
            height: 400px; 
            object-fit: cover; 
        }
        .test-info {
            padding: 20px;
            background: #e8f5e8;
            margin: 20px 0;
            border-radius: 8px;
        }
        .status { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Video Loading Test</h1>
    
    <div class="test-info">
        <h3>Testing Video URL:</h3>
        <p><strong>https://res.cloudinary.com/dqvsjtkqw/video/upload/v1755519277/large_5mHOOv9b_gp2ytq.mp4</strong></p>
    </div>

    <div class="video-container">
        <video 
            id="testVideo"
            controls 
            muted 
            autoplay 
            loop 
            preload="auto"
            onloadstart="updateStatus('Loading started...', 'info')"
            onloadeddata="updateStatus('Video data loaded successfully!', 'success')"
            oncanplay="updateStatus('Video can play!', 'success')"
            onerror="updateStatus('Video failed to load!', 'error')"
            onplay="updateStatus('Video is playing!', 'success')"
        >
            <source src="https://res.cloudinary.com/dqvsjtkqw/video/upload/v1755519277/large_5mHOOv9b_gp2ytq.mp4" type="video/mp4">
            <p>Your browser does not support the video tag.</p>
        </video>
    </div>

    <div id="status-log">
        <h3>Status Log:</h3>
    </div>

    <script>
        function updateStatus(message, type) {
            const log = document.getElementById('status-log');
            const timestamp = new Date().toLocaleTimeString();
            const statusDiv = document.createElement('div');
            statusDiv.className = 'status ' + type;
            statusDiv.innerHTML = `[${timestamp}] ${message}`;
            log.appendChild(statusDiv);
            console.log(message);
        }

        // Test direct URL access
        fetch('https://res.cloudinary.com/dqvsjtkqw/video/upload/v1755519277/large_5mHOOv9b_gp2ytq.mp4', {method: 'HEAD'})
            .then(response => {
                if (response.ok) {
                    updateStatus('Video URL is accessible via fetch!', 'success');
                } else {
                    updateStatus(`Video URL returned status: ${response.status}`, 'error');
                }
            })
            .catch(error => {
                updateStatus(`Fetch error: ${error.message}`, 'error');
            });

        // Additional debugging
        const video = document.getElementById('testVideo');
        video.addEventListener('loadstart', () => updateStatus('Load start event fired', 'info'));
        video.addEventListener('error', (e) => {
            updateStatus(`Video error event: ${e.message || 'Unknown error'}`, 'error');
            console.error('Video error details:', e);
        });
    </script>
</body>
</html>
